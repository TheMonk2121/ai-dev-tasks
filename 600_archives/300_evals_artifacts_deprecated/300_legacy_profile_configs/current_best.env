# Current Best Configuration (symlink to precision_elevated.env)
# This represents our current best-performing configuration
# Updated via lessons engine or manual promotion

# Precision Elevated Configuration (effective knobs only)
# Goal: bump precision/F1 without tanking recall

# Core anti-throttle (safe defaults)
export USE_BEDROCK_QUEUE=1
export ASYNC_MAX_CONCURRENCY=1
export BEDROCK_MAX_CONCURRENCY=1
export BEDROCK_MAX_RPS=0.15
export BEDROCK_COOLDOWN_SEC=30
export BEDROCK_RETRY_MAX=8
export BEDROCK_RETRY_BASE=1.8
export BEDROCK_RETRY_MAX_SLEEP=20

# JSON + coverage rewrite (stay cost-safe)
export RAGCHECKER_COVERAGE_REWRITE=0
export RAGCHECKER_JSON_PROMPTS=0
export RAGCHECKER_JSON_MAX_TOKENS=200

# Evidence selection — precision bias
export RAGCHECKER_EVIDENCE_KEEP_MODE=percentile
export RAGCHECKER_EVIDENCE_KEEP_PERCENTILE=72
export RAGCHECKER_EVIDENCE_MIN_SENT=2
export RAGCHECKER_EVIDENCE_MAX_SENT=6
export RAGCHECKER_REDUNDANCY_TRIGRAM_MAX=0.42
export RAGCHECKER_PER_CHUNK_CAP=2
export RAGCHECKER_PER_CHUNK_CAP_SMALL=2

# Blended scoring weights — favor Jaccard
export RAGCHECKER_WEIGHT_JACCARD=0.40
export RAGCHECKER_WEIGHT_ROUGE=0.35
export RAGCHECKER_WEIGHT_COSINE=0.25

# Guard floors — promote strong matches
export RAGCHECKER_EVIDENCE_GUARD=1
export RAGCHECKER_EVIDENCE_JACCARD=0.12
export RAGCHECKER_EVIDENCE_COVERAGE=0.50

# Generation shaping
export RAGCHECKER_CONCISE=1
export RAGCHECKER_MAX_WORDS=900
export RAGCHECKER_REQUIRE_CITATIONS=1

# Model/region
export AWS_REGION=us-east-1
export BEDROCK_MODEL_ID=anthropic.claude-3-haiku-20240307-v1:0
