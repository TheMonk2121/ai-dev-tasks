# Real RAG System Evaluation Profile
# Baseline/tuning on real RAG system

# DSPy RAG system path and driver
DSPY_RAG_PATH=src
EVAL_DRIVER=dspy_rag

# Enable real RAG system instead of synthetic test cases
RAGCHECKER_USE_REAL_RAG=1

# Fusion adapter settings
RETR_TOPK_VEC=140
RETR_TOPK_BM25=140
RETR_TOPK_OTHER=0
RRF_K=60
RERANK_ENABLE=1
RERANKER_MODEL=BAAI/bge-reranker-v2-m3
RERANK_POOL=60
RERANK_TOPN=18
CONTEXT_DOCS_MAX=12
FUSE_TAIL_KEEP=0
SNAPSHOT_MAX_ITEMS=50

# Conservative Bedrock settings
BEDROCK_MAX_RPS=0.12
BEDROCK_CALL_TIMEOUT_SEC=35
BEDROCK_TEXT_TIMEOUT_SEC=25
RAGCHECKER_BYPASS_CLI=1
RAGCHECKER_DISABLE_EMBEDDINGS=1

# Evaluation settings
RAGCHECKER_PROGRESS_LOG=metrics/baseline_evaluations/progress.jsonl
RAGCHECKER_CONCISE=1
RAGCHECKER_MAX_WORDS=1000
SAVE_CANDIDATES_MAX=20
PER_FILE_CAP=3
READER_DOCS_BUDGET=16
READER_MIN_OVERLAP_RATIO=0.25

# Bedrock stability caps
BEDROCK_MAX_IN_FLIGHT=1

# Keep synthetic/embeddings off in this pass
RAGCHECKER_DISABLE_STABLE_DEFAULT=1

# Database connection for real RAG system
POSTGRES_DSN=postgresql://danieljacobs@localhost:5432/ai_agency
DATABASE_URL=postgresql://danieljacobs@localhost:5432/ai_agency

# UV Environment
UV_PROJECT_ENVIRONMENT=.venv

# Evaluation concurrency
EVAL_CONCURRENCY=3

# Disable DSPy JSON adapter to avoid parsing failures in evaluations
DSPY_DISABLE_JSON_ADAPTER=1
