{"timestamp": "2025-09-07T05:56:07.141685", "type": "game_day_drills", "data": {"timestamp": "2025-09-07T05:55:52.152261", "drills": {"rollback_drill": {"drill_name": "rollback_drill", "timestamp": "2025-09-07T05:55:52.152274", "steps": {"rollback_command": {"success": true, "stdout": "\ud83d\udea8 EMERGENCY ROLLBACK\n==================================================\n\ud83d\udcdd Reason: drill\n\ud83d\udccd Step 1: Flipping active pointer to prior run...\n\ud83e\uddf9 Step 2: Clearing retrieval cache...\n\ud83e\uddea Step 3: Re-running smoke evaluation...\n\u274c Emergency rollback failed\n\ud83d\udcca Rollback result: failed\n", "stderr": ""}, "pointer_flip": {"success": false, "error": "Active pointer file not found"}, "cache_clear": {"success": true, "cleared_dirs": [".cache", "cache", "retrieval_cache"], "total_dirs": 3}, "smoke_eval": {"success": false, "stdout": "\ud83c\udf19 Starting Nightly Smoke Evaluation\n==================================================\n\n\ud83e\uddea Running ops_health tests: Operations and health checks\n  \ud83d\udd0d Running database_connectivity...\n  \ud83d\udd0d Running model_availability...\n  \ud83d\udd0d Running configuration_validation...\n  \ud83d\udd0d Running resource_availability...\n\n\ud83e\uddea Running db_workflows tests: Database workflow validation\n  \ud83d\udd0d Running document_ingestion...\n  \ud83d\udd0d Running chunk_processing...\n  \ud83d\udd0d Running vector_indexing...\n  \ud83d\udd0d Running metadata_consistency...\n\n\ud83e\uddea Running rag_qa tests: RAG system quality assurance\n  \ud83d\udd0d Running retrieval_quality...\n  \ud83d\udd0d Running fusion_performance...\n  \ud83d\udd0d Running reranking_accuracy...\n  \ud83d\udd0d Running context_assembly...\n\n\ud83e\uddea Running meta_ops tests: Meta-operations validation\n  \ud83d\udd0d Running evaluation_pipeline...\n  \ud83d\udd0d Running metrics_collection...\n  \ud83d\udd0d Running logging_systems...\n  \ud83d\udd0d Running audit_trails...\n\n\ud83e\uddea Running negatives tests: Negative test cases\n  \ud83d\udd0d Running error_handling...\n  \ud83d\udd0d Running edge_cases...\n  \ud83d\udd0d Running failure_recovery...\n  \ud83d\udd0d Running graceful_degradation...\n\ud83d\udcdd Results saved to: metrics/nightly_smoke/nightly_smoke_20250907_055602.json\n\n============================================================\n\ud83c\udf19 NIGHTLY SMOKE EVALUATION SUMMARY\n============================================================\n\u274c Overall Status: FAIL\n\u23f1\ufe0f Duration: 4.4 seconds\n\n\ud83d\udcca Category Results:\n  \u274c ops_health: FAIL\n    \ud83d\udd34 database_connectivity: Database connectivity failed: No module named 'dspy_rag_system'\n    \ud83d\udd34 configuration_validation: Missing configurations: ['DSPY_RAG_PATH', 'EVAL_DRIVER', 'RETR_TOPK_VEC', 'RETR_TOPK_BM25', 'RERANK_ENABLE']\n  \u274c db_workflows: FAIL\n    \ud83d\udd34 document_ingestion: Document ingestion test failed: No module named 'dspy_rag_system'\n    \ud83d\udd34 chunk_processing: Chunk processing test failed: No module named 'dspy_rag_system'\n    \ud83d\udd34 vector_indexing: Vector indexing test failed: No module named 'dspy_rag_system'\n    \ud83d\udd34 metadata_consistency: Metadata consistency test failed: No module named 'dspy_rag_system'\n  \u2705 rag_qa: PASS\n  \u2705 meta_ops: PASS\n  \u2705 negatives: PASS\n\n\ud83d\udcc8 Deltas:\n  \u2022 New failures: 0\n  \u2022 Resolved failures: 0\n\n\ud83d\udcc9 Top Regressions:\n  \ud83d\udd34 example.example_test: Example regression description\n\n\ud83d\udca1 Recommendations:\n  \u2022 Fix ops_health failures: database_connectivity: Database connectivity failed: No module named 'dspy_rag_system', configuration_validation: Missing configurations: ['DSPY_RAG_PATH', 'EVAL_DRIVER', 'RETR_TOPK_VEC', 'RETR_TOPK_BM25', 'RERANK_ENABLE']\n  \u2022 Fix db_workflows failures: document_ingestion: Document ingestion test failed: No module named 'dspy_rag_system', chunk_processing: Chunk processing test failed: No module named 'dspy_rag_system', vector_indexing: Vector indexing test failed: No module named 'dspy_rag_system', metadata_consistency: Metadata consistency test failed: No module named 'dspy_rag_system'\n============================================================\n", "stderr": ""}, "audit_log": {"success": true, "recent_rollbacks": 1, "log_file": "configs/on_call/rollback_log.jsonl"}}, "passed": false, "message": "Rollback drill: failed - 3/5 steps successful"}, "negative_control": {"drill_name": "negative_control_audit", "timestamp": "2025-09-07T05:56:07.141624", "test_cases": {"neg_001": {"id": "neg_001", "query": "What is the meaning of life, the universe, and everything?", "expected": "not found", "actual": "not found", "passed": true, "timestamp": "2025-09-07T05:56:07.141642"}, "neg_002": {"id": "neg_002", "query": "How do I build a time machine?", "expected": "not found", "actual": "not found", "passed": true, "timestamp": "2025-09-07T05:56:07.141648"}, "neg_003": {"id": "neg_003", "query": "What is the secret recipe for Coca-Cola?", "expected": "not found", "actual": "not found", "passed": true, "timestamp": "2025-09-07T05:56:07.141651"}}, "passed": true, "message": "Negative control audit: passed - 3/3 cases passed"}, "prefix_guard": {"drill_name": "prefix_guard", "timestamp": "2025-09-07T05:56:07.141657", "checks": {"sql_check": {"success": true, "prefix_leakage_count": 0, "sql_query": "\n            SELECT COUNT(*) as prefix_leakage_count\n            FROM document_chunks\n            WHERE bm25_text LIKE 'prefix_%'\n            ", "passed": true}, "bm25_check": {"success": true, "bm25_clean": true, "passed": true}, "guard_check": {"success": true, "prefix_guard_enabled": true, "passed": true}}, "passed": true, "message": "Prefix guard drill: passed - 3/3 checks passed"}}, "overall_status": "failed"}}
