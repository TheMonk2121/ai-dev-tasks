# Real RAG System Evaluation Configuration
# This enables the evaluation system to use your actual DSPy RAG system with fusion adapter

# DSPy RAG system path and driver
export DSPY_RAG_PATH="dspy-rag-system/src"
export EVAL_DRIVER=dspy_rag

# Enable real RAG system instead of synthetic test cases
export RAGCHECKER_USE_REAL_RAG=1

# Fusion adapter settings (Path A)
export RETR_TOPK_VEC=140
export RETR_TOPK_BM25=140
export RETR_TOPK_OTHER=0
export RRF_K=60
export RERANK_ENABLE=1
export RERANK_MODEL=BAAI/bge-reranker-base
export RERANK_POOL=60
export RERANK_TOPN=18
export CONTEXT_DOCS_MAX=12
export FUSE_TAIL_KEEP=0
export SNAPSHOT_MAX_ITEMS=50

# Conservative Bedrock settings
export BEDROCK_MAX_RPS=0.12
export BEDROCK_CALL_TIMEOUT_SEC=35
export BEDROCK_TEXT_TIMEOUT_SEC=25
export RAGCHECKER_BYPASS_CLI=1
export RAGCHECKER_DISABLE_EMBEDDINGS=1

# Evaluation settings
export RAGCHECKER_PROGRESS_LOG=metrics/baseline_evaluations/progress.jsonl
export RAGCHECKER_CONCISE=1
export RAGCHECKER_MAX_WORDS=1000
export SAVE_CANDIDATES_MAX=20

# Bedrock stability caps (if generation uses Bedrock)
export BEDROCK_MAX_IN_FLIGHT=1

# Keep synthetic/embeddings off in this pass
export RAGCHECKER_DISABLE_STABLE_DEFAULT=1
