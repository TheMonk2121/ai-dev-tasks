# Path B: Query expansion (HyDE + PRF), constrained
# Goal: when the original query is under-specified, retrieve with a "better" embedding

# HyDE (Hypothetical Document Embeddings)
export HYDE_ENABLE=1
export HYDE_MODEL=local_llm_or_bedrock
export HYDE_TOKENS=160
export HYDE_WEIGHT=0.6

# Pseudo-relevance feedback on BM25@20
export PRF_ENABLE=1
export PRF_TOPN=8
export PRF_TERMS=10
export PRF_WEIGHT=0.35

# Fusion weights to favor BM25 for short/numeric queries
export FUSION_WEIGHTS="bm25:1.2,vec:1.0,hyde:0.8"

# Include Path A settings
export RETR_TOPK_VEC=140
export RETR_TOPK_BM25=140
export FUSION_METHOD=RRF
export RRF_K=60
export RERANK_ENABLE=1
export RERANK_TOPN=18

# Conservative settings
export PIPELINE_WORKERS=2
export BEDROCK_MAX_IN_FLIGHT=1
export BEDROCK_MAX_RPS=0.12
export RAGCHECKER_BYPASS_CLI=1
export RAGCHECKER_DISABLE_EMBEDDINGS=1
